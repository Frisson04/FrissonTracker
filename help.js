        const translations = {
            'en': {
                'title': 'Help - My Application',
                'h1': 'Complete User Guide',
                'quick-links-h2': 'Summary',
                'tracker-link': 'Tracker',
                'interface-link': 'Interface',
                'advanced-link': 'Advanced Configuration',
                'discord-h3': 'Discord',
                'tracker-h2': 'Automatic Tracker',
                'tracker-p': 'Discover an intuitive tracking tool perfectly adapted to your needs, with simplified configuration for immediate use.',
                'interface-h2': 'Interface Exploration',
                'interface-p': 'Master every aspect of the user interface with this detailed guide.',
                'config-summary': 'Configuration Panel',
                'config-p': 'Access an interactive dashboard allowing you to configure your tracker with unmatched precision, all in a visual and ergonomic environment.',
                'custom-summary': 'Customization Mode',
                'custom-p': 'Unleash your creativity with our advanced customization system: resize, reposition and adjust each element according to your preferences to create a truly unique interface.',
                'stream-summary': 'Streaming Mode (OBS)',
                'stream-p': 'Easily integrate your tracker as an overlay in OBS with our streaming-optimized setup. A simple window capture is enough to display your progress in real time to your audience.',
                'stream-tips': 'Tips: Use "Window Capture" mode in OBS and select the application. Enable transparency in OBS filters for a perfectly integrated overlay in your scene.',
                'features-h2': 'Complete Features Guide',
                'basic-summary': 'Basic Functions',
                'basic-p1': 'Customize the visual atmosphere of your tracker by changing the background image to your liking.',
                'basic-p2': 'Connecting to your account is essential to unlock all overlay customization features.',
                'basic-p3': 'Create and organize your categories with great flexibility: add custom color codes and adjust icon sizes for an optimal visual experience.',
                'basic-p4': 'Once connected, easily configure your Items and Locations using our interactive table. We will explore advanced settings in the following sections.',
                'basic-p5': 'Export and import your pack configurations in just a few clicks. Remember to save your work regularly to preserve your customizations!',
                'items-summary': 'Received Items Settings',
                'items-p1': 'Automatically associates the image name with the corresponding object in Archipelago.',
                'items-p2': 'Freely select the category to associate with each object for perfectly adapted organization.',
                'items-p3': 'Import your own images or use external links to completely customize the appearance of your objects.',
                'counter-title': 'Counter Mode',
                'counter-p': 'This mode dynamically displays the quantity of the same object owned. Ideal for tracking collectible items like stars or coins.',
                'images-title': 'Different Images Mode',
                'images-p': 'Allows displaying distinct images depending on the number of copies owned. Perfect for representing object evolutions (like the hookshot in Zelda) or progressive upgrades.',
                'images-example': 'Practical example: The hookshot visually evolves from a short version to a long version according to your progress.',
                'locations-summary': 'Locations Configuration',
                'checkmark-title': 'Checkmark Image',
                'checkmark-p': 'Select the image that will be displayed as a completion indicator when the location is completed. This feature allows you to visually customize the completion confirmation.',
                'checkmark-example': 'Example: You have Mario as an obtained object, you can display a checkmark on his icon as soon as you complete the associated location, for example "Win with Mario".',
                'order-title': 'Display Order Management',
                'order-p': 'Precisely determine the display priority order of images to visually represent your progress.',
                'order-example': 'Use case: For Mario Kart cup trophies, you can configure the sequential display of images (Bronze â†’ Silver â†’ Gold).'
            },
            'fr': {
                'title': 'Aide - Mon Application',
                'h1': 'Guide d\'utilisation complet',
                'quick-links-h2': 'Sommaire',
                'tracker-link': 'Traceur',
                'interface-link': 'Interface',
                'advanced-link': 'Configuration avancÃ©e',
                'discord-h3': 'Discord',
                'tracker-h2': 'Traceur Automatique',
                'tracker-p': 'DÃ©couvrez un outil de tracking intuitif et parfaitement adaptÃ© Ã  vos besoins, avec une configuration simplifiÃ©e pour une prise en main immÃ©diate.',
                'interface-h2': 'Exploration de l\'Interface',
                'interface-p': 'MaÃ®trisez chaque aspect de l\'interface utilisateur grÃ¢ce Ã  ce guide dÃ©taillÃ©.',
                'config-summary': 'Panneau de Configuration',
                'config-p': 'AccÃ©dez Ã  un tableau de bord interactif vous permettant de configurer votre tracker avec une prÃ©cision inÃ©galÃ©e, le tout dans un environnement visuel et ergonomique.',
                'custom-summary': 'Mode Personnalisation',
                'custom-p': 'LibÃ©rez votre crÃ©ativitÃ© avec notre systÃ¨me de personnalisation avancÃ© : redimensionnez, repositionnez et ajustez chaque Ã©lÃ©ment selon vos prÃ©fÃ©rences pour crÃ©er une interface vÃ©ritablement unique.',
                'stream-summary': 'Mode Streaming (OBS)',
                'stream-p': 'IntÃ©grez facilement votre tracker comme overlay dans OBS avec notre configuration optimisÃ©e pour le streaming. Une simple capture de fenÃªtre suffit pour afficher votre progression en temps rÃ©el Ã  votre audience.',
                'stream-tips': 'Tips : Utilisez le mode "Capture de fenÃªtre" dans OBS et sÃ©lectionnez l\'application. Activez la transparence dans les filtres d\'obs pour un overlay parfaitement intÃ©grÃ© Ã  votre scÃ¨ne.',
                'features-h2': 'Guide Complet des FonctionnalitÃ©s',
                'basic-summary': 'Fonctions de Base',
                'basic-p1': 'Personnalisez l\'ambiance visuelle de votre tracker en modifiant l\'image d\'arriÃ¨re-plan selon vos goÃ»ts.',
                'basic-p2': 'La connexion Ã  votre compte est essentielle pour dÃ©bloquer toutes les fonctionnalitÃ©s de personnalisation de votre overlay.',
                'basic-p3': 'CrÃ©ez et organisez vos catÃ©gories avec une grande flexibilitÃ© : ajoutez des codes couleur personnalisÃ©s et ajustez la taille des icÃ´nes pour une expÃ©rience visuelle optimale.',
                'basic-p4': 'Une fois connectÃ©, configurez facilement vos Items et Locations grÃ¢ce Ã  notre tableau interactif. Nous explorerons les paramÃ¨tres avancÃ©s dans les sections suivantes.',
                'basic-p5': 'Exportez et importez vos configurations de packs en quelques clics. Pensez Ã  sauvegarder rÃ©guliÃ¨rement votre travail pour prÃ©server vos personnalisations !',
                'items-summary': 'ParamÃ¨tres des object reÃ§u',
                'items-p1': 'Associe automatiquement le nom de l\'image avec l\'objet correspondant dans Archipelago.',
                'items-p2': 'SÃ©lectionnez librement la catÃ©gorie Ã  associer Ã  chaque objet pour une organisation parfaitement adaptÃ©e.',
                'items-p3': 'Importez vos propres images ou utilisez des liens externes pour personnaliser complÃ¨tement l\'apparence de vos objets.',
                'counter-title': 'Mode Compteur (Counter)',
                'counter-p': 'Ce mode affiche dynamiquement la quantitÃ© d\'un mÃªme objet possÃ©dÃ©. IdÃ©al pour suivre les objets accumulables comme les Ã©toiles ou les piÃ¨ces.',
                'images-title': 'Mode Images DiffÃ©rentes (Different images)',
                'images-p': 'Permet d\'afficher des images distinctes en fonction du nombre d\'exemplaires possÃ©dÃ©s. Parfait pour reprÃ©senter les Ã©volutions d\'objets (comme le grappin dans Zelda) ou les amÃ©liorations progressives.',
                'images-example': 'Exemple concret : Le grappin Ã©volue visuellement d\'une version courte Ã  une version longue selon votre progression.',
                'locations-summary': 'Configuration des Locations',
                'checkmark-title': 'Image de Checkmark',
                'checkmark-p': 'SÃ©lectionnez l\'image qui s\'affichera comme indicateur de validation lorsque la location sera complÃ©tÃ©e. Cette fonctionnalitÃ© vous permet de personnaliser visuellement la confirmation d\'achÃ¨vement.',
                'checkmark-example': 'Exemple : Vous avez Mario comme objet obtenu, vous pouvez afficher un checkmark sur son icÃ´ne dÃ¨s que vous accomplissez la location associÃ©e par exemple "Win with Mario".',
                'order-title': 'Gestion de l\'Ordre d\'Affichage',
                'order-p': 'DÃ©terminez prÃ©cisÃ©ment l\'ordre de prioritÃ© d\'affichage des images pour reprÃ©senter visuellement votre progression.',
                'order-example': 'Cas d\'utilisation : Pour les trophÃ©es de coupe dans Mario Kart, vous pouvez configurer l\'affichage sÃ©quentiel des images (Bronze â†’ Argent â†’ Or).'
            }
        };

        function translatePage(lang) {
            const t = translations[lang];
            if (!t) return;

            document.querySelector('title').textContent = t['title'];
            document.querySelector('h1').textContent = t['h1'];
            
            const quickLinksH2 = document.querySelector('.quick-links h2');
            if (quickLinksH2) quickLinksH2.textContent = t['quick-links-h2'];
            
            const trackerLink = document.querySelector('a[href="#tracker"]');
            if (trackerLink) trackerLink.textContent = t['tracker-link'];
            
            const interfaceLink = document.querySelector('a[href="#interface"]');
            if (interfaceLink) interfaceLink.textContent = t['interface-link'];
            
            const advancedLink = document.querySelector('a[href="#fonction1"]');
            if (advancedLink) advancedLink.textContent = t['advanced-link'];
            
            const discordH3 = document.querySelector('.quick-links h3');
            if (discordH3) discordH3.textContent = t['discord-h3'];
            
            const trackerH2 = document.querySelector('#tracker h2');
            if (trackerH2) trackerH2.textContent = t['tracker-h2'];
            
            const trackerP = document.querySelector('#tracker p');
            if (trackerP) trackerP.textContent = t['tracker-p'];
            
            const interfaceH2 = document.querySelector('#interface h2');
            if (interfaceH2) interfaceH2.textContent = t['interface-h2'];
            
            const interfaceP = document.querySelector('#interface p');
            if (interfaceP) interfaceP.textContent = t['interface-p'];
            

            const details = document.querySelectorAll('details');
            
            if (details[0]) {
                details[0].querySelector('summary').textContent = t['config-summary'];
                const p = details[0].querySelector('p');
                if (p) p.textContent = t['config-p'];
            }
            
            if (details[1]) {
                details[1].querySelector('summary').textContent = t['custom-summary'];
                const p = details[1].querySelector('p');
                if (p) p.textContent = t['custom-p'];
            }
            
            if (details[2]) {
                details[2].querySelector('summary').textContent = t['stream-summary'];
                const p = details[2].querySelector('p');
                if (p) p.textContent = t['stream-p'];
                const strong = details[2].querySelector('p strong');
                if (strong) strong.textContent = t['stream-tips'];
            }
            
            const featuresH2 = document.querySelector('#fonction1 h2');
            if (featuresH2) featuresH2.textContent = t['features-h2'];
            
            if (details[3]) {
                details[3].querySelector('summary').textContent = t['basic-summary'];
                const basicPs = details[3].querySelectorAll('p');
                if (basicPs[0]) basicPs[0].textContent = t['basic-p1'];
                if (basicPs[1]) basicPs[1].textContent = t['basic-p2'];
                if (basicPs[2]) basicPs[2].textContent = t['basic-p3'];
                if (basicPs[3]) basicPs[3].textContent = t['basic-p4'];
                if (basicPs[4]) basicPs[4].textContent = t['basic-p5'];
            }
            
            if (details[4]) {
                details[4].querySelector('summary').textContent = t['items-summary'];
                const itemsPs = details[4].querySelectorAll('p');
                if (itemsPs[0]) itemsPs[0].textContent = t['items-p1'];
                if (itemsPs[1]) itemsPs[1].textContent = t['items-p2'];
                if (itemsPs[2]) itemsPs[2].textContent = t['items-p3'];
                
                const counterContainer = details[4].querySelectorAll('.bordered-container')[0];
                if (counterContainer) {
                    const counterTitle = counterContainer.querySelector('p:first-child');
                    if (counterTitle) counterTitle.textContent = t['counter-title'];
                    const counterP = counterContainer.querySelector('p:last-child');
                    if (counterP) counterP.textContent = t['counter-p'];
                }
                
                const imagesContainer = details[4].querySelectorAll('.bordered-container')[1];
                if (imagesContainer) {
                    const imagesTitle = imagesContainer.querySelector('p:first-child');
                    if (imagesTitle) imagesTitle.textContent = t['images-title'];
                    const imagesPs = imagesContainer.querySelectorAll('p');
                    if (imagesPs[1]) imagesPs[1].textContent = t['images-p'];
                    if (imagesPs[2]) imagesPs[2].textContent = t['images-example'];
                }
            }
            
            if (details[5]) {
                details[5].querySelector('summary').textContent = t['locations-summary'];
                const checkmarkContainer = details[5].querySelectorAll('.bordered-container')[0];
                if (checkmarkContainer) {
                    const checkmarkTitle = checkmarkContainer.querySelector('h3');
                    if (checkmarkTitle) checkmarkTitle.textContent = t['checkmark-title'];
                    const checkmarkPs = checkmarkContainer.querySelectorAll('p');
                    if (checkmarkPs[0]) checkmarkPs[0].textContent = t['checkmark-p'];
                    if (checkmarkPs[1]) checkmarkPs[1].textContent = t['checkmark-example'];
                }
                
                const orderContainer = details[5].querySelectorAll('.bordered-container')[1];
                if (orderContainer) {
                    const orderTitle = orderContainer.querySelector('h3');
                    if (orderTitle) orderTitle.textContent = t['order-title'];
                    const orderPs = orderContainer.querySelectorAll('p');
                    if (orderPs[0]) orderPs[0].textContent = t['order-p'];
                    if (orderPs[1]) orderPs[1].textContent = t['order-example'];
                }
            }
        }

        function initLanguageSwitcher() {
            const languageSwitcher = document.getElementById('languageSwitcher');
            const languageText = document.querySelector('.language-text');
            
            if (!languageSwitcher || !languageText) return;

            let currentLang = localStorage.getItem('languagePreference');
            if (!currentLang) {
                currentLang = navigator.language.startsWith('fr') ? 'fr' : 'en';
            }

            function updateLanguage(lang) {
                if (lang === 'en') {
                    languageText.textContent = 'FR';
                    translatePage('en');
                } else {
                    languageText.textContent = 'EN';
                    translatePage('fr');
                }
                localStorage.setItem('languagePreference', lang);
            }

            updateLanguage(currentLang);


            languageSwitcher.addEventListener('click', () => {
                const newLang = languageText.textContent === 'EN' ? 'en' : 'fr';
                updateLanguage(newLang);
            });
        }


        function initImageZoom() {
            const overlay = document.getElementById('imageOverlay');
            const zoomedImg = document.getElementById('zoomedImage');
            const closeBtn = document.querySelector('.close-overlay');

            if (!overlay || !zoomedImg || !closeBtn) {
                console.error('Ã‰lÃ©ments du zoom manquants dans le DOM');
                return;
            }

            document.querySelectorAll('img:not(.image-overlay img)').forEach(img => {
                img.addEventListener('click', function(e) {
                    e.stopPropagation();
                    zoomedImg.src = this.src;
                    zoomedImg.alt = this.alt || 'Image zoomÃ©e';
                    overlay.style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                });
            });

            closeBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                overlay.style.display = 'none';
                document.body.style.overflow = 'auto';
            });

            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    overlay.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && overlay.style.display === 'flex') {
                    overlay.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function initExternalLinks() {
            document.querySelectorAll('.external-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const url = e.currentTarget.getAttribute('href');
                    
                    if (typeof require !== 'undefined') {
                        const { ipcRenderer } = require('electron');
                        ipcRenderer.send('open-external-with-size', url);
                    } else {
                        window.open(url, '_blank');
                    }
                });
            });
        }

        function highlightCurrentSection() {
            const currentHash = window.location.hash;
            if (currentHash) {
                document.querySelectorAll('.sidebar a').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === currentHash) {
                        link.classList.add('active');
                    }
                });
                
                const details = document.querySelector(`a[href="${currentHash}"]`)?.closest('details');
                if (details) {
                    details.open = true;
                }
            }
        }


        function initButtons() {
            document.getElementById('installDemoBtn')?.addEventListener('click', () => {
                alert('DÃ©mo d\'installation lancÃ©e!');
            });
            
            document.getElementById('tryFunctionBtn')?.addEventListener('click', () => {
                alert('FonctionnalitÃ© activÃ©e!');
            });
            
            document.getElementById('contactBtn')?.addEventListener('click', () => {
                if (typeof require !== 'undefined') {
                    const { ipcRenderer } = require('electron');
                    ipcRenderer.send('open-contact-window');
                } else {
                    window.open('#contact', '_self');
                }
            });
        }

        function loadSavedTheme() {
            if (typeof require !== 'undefined') {
                const { ipcRenderer } = require('electron');
                ipcRenderer.invoke('get-theme').then(theme => {
                    if (theme) {
                        document.body.setAttribute('data-theme', theme);
                        document.querySelector('.theme-switcher').textContent = theme === 'dark' ? 'ðŸŒ“' : 'ðŸŒ’';
                    }
                }).catch(err => {
                    console.error('Erreur lors de la rÃ©cupÃ©ration du thÃ¨me:', err);
                });
            } else if (localStorage.getItem('themePreference')) {
                const savedTheme = localStorage.getItem('themePreference');
                document.body.setAttribute('data-theme', savedTheme);
                document.querySelector('.theme-switcher').textContent = savedTheme === 'dark' ? 'ðŸŒ“' : 'ðŸŒ’';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initLanguageSwitcher();
            initImageZoom();
            initExternalLinks();
            initThemeSwitcher();
            initButtons();
            loadSavedTheme();
            highlightCurrentSection();
            
            window.addEventListener('hashchange', highlightCurrentSection);
        });